# Set the prefix to C-t.
set -g prefix C-t
unbind C-b
bind t send-prefix

set-option -g set-titles on
set-option -g set-titles-string "[tmux] #T @ #H"

setw -g xterm-keys on
setw -g automatic-rename off

# Mouse operation
setw -g mouse

set -sg escape-time 0
set -g allow-rename off

set -g base-index 1
setw -g pane-base-index 1

## Colorscheme: Solarized
# 256color-terminal
set -g default-terminal "xterm-256color"

# Status bar colors
set -g status-bg colour235 #base02
set -g status-fg colour136 #yellow
set -g status-attr default

# Default window title colors
setw -g window-status-fg colour244
setw -g window-status-bg default
setw -g window-status-attr dim

# Active window tile colors
setw -g window-status-current-fg colour166 # orange
setw -g window-status-current-bg default
setw -g window-status-current-attr bright

# Pane border
set -g pane-border-fg colour235 #base02
set -g pane-active-border-fg colour240 #base01

# Message text
set -g message-bg colour235 #base02
set -g message-fg colour166 #orange

# Pane number display
set -g display-panes-active-colour colour33 #blue
set -g display-panes-colour colour166 #orange

# Clock
setw -g clock-mode-colour colour64 #green


## Status bar config
set -g status-left-length 90
set -g status-right-length 90

# Content
set -g status-left "tmux:[#P] "
set -g status-right "[%Y-%m-%d(%a) %H:%M]"

# Set flush interval
set -g status-interval 15

# Centerize window list
set-option -g status-justify centre

# Enable visual notification
setw -g monitor-activity on
set -g visual-activity on


## Copy mode
setw -g mode-keys vi

bind [ copy-mode \; display "Copy mode!"
bind v copy-mode \; display "Copy mode!"
bind y paste-buffer

# set -g default-command "reattach-to-user-namespace -l ${SHELL}"

bind -t vi-copy v begin-selection
bind -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"
unbind -t vi-copy Enter
bind -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"


## Keybind
# reload .tmux.conf
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# split window | and -
bind | split-window -h
bind - split-window -v

# move pane with vi bind
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# resize pane with vi bind
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

bind ^T last-window
bind ' ' next-window

# Kill window
bind k confirm-before "kill-window"
# Kill session
bind K confirm-before "kill-session"

# Kill pane
bind q kill-pane

# Switch clients
bind-key N switch-client -n
bind-key P switch-client -p

# Select window fzf
bind-key b split-window 'tmux lsw | fzf | cut -d":" -f 1 | xargs tmux select-window -t'

# Select session fzf
bind-key C-b split-window 'tmux ls | fzf | cut -d":" -f 1 | xargs tmux switch-client -t'

# Select paste-buffer fzf
bind-key C-y split-window 'tmux lsb | fzf | cut -d":" -f 1 | xargs tmux paste-buffer -b'
